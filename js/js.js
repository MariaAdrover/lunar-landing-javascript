var g=4.622;var dt=0.016683;var timer=null;var timerFuel=null;var pause=false;var juegoEmpezado=false;var advert=false;var menu=false;var audioElement;var musicOn=true;var y=5;var v=0;var c=100;var a=g;var vAterrizaje;var nave=1;var motorON=false;var aterrizado=false;var sinCombustible=false;var velocidad=null;var altura=null;var combustible=null;var nContador;var contador;var contadorOn=false;window.onload=function(){audioElement=document.createElement('audio');audioElement.setAttribute('src','sound/8-bit-Arcade4.mp3');audioElement.setAttribute('autoplay','autoplay');audioElement.setAttribute('loop','loop');velocidad=document.getElementById("velocidad");altura=document.getElementById("altura");combustible=document.getElementById("fuel");document.getElementById("showm").onclick=function(){if(advert==false){if(juegoEmpezado&&aterrizado==false){if(menu){document.getElementsByClassName("menu")[0].style.display="none";menu=false;reanudarJuego();}else{document.getElementsByClassName("menu")[0].style.display="block";menu=true;pausarJuego();}}else{if(menu){document.getElementsByClassName("menu")[0].style.display="none";menu=false;if(juegoEmpezado==false){document.getElementById('dificultad').style.display='block';} if(contadorOn){contador=setInterval(cuentaAtras,1000);}}else{document.getElementsByClassName("menu")[0].style.display="block";menu=true;if(juegoEmpezado==false){document.getElementById('dificultad').style.display='none';} if(contadorOn){clearInterval(contador);}}}}} document.getElementById("hidem").onclick=function(){if(advert==false){if(juegoEmpezado&&aterrizado==false){document.getElementsByClassName("menu")[0].style.display="none";menu=false;reanudarJuego();}else{document.getElementsByClassName('menu')[0].style.display='none';menu=false;if(juegoEmpezado==false&&contadorOn==false){document.getElementById('dificultad').style.display='block';} if(contadorOn){contador=setInterval(cuentaAtras,1000);}}}} document.getElementById('cambiarNave').onclick=function(){if(aterrizado==false){cambiarNave();}} document.getElementsByClassName('aviso')[0].onclick=function(){if(advert==false){document.getElementById('adINSTRUCCIONES').style.display='block';if(contadorOn){clearInterval(contador);} if(juegoEmpezado&&aterrizado==false){pausarJuego();} advert=true;}} document.getElementsByClassName('aviso')[1].onclick=function(){if(advert==false){document.getElementById('adABOUT').style.display='block';if(contadorOn){clearInterval(contador);} if(juegoEmpezado&&aterrizado==false){pausarJuego();} advert=true;}} document.getElementById('siINS').onclick=function(){location.href='https://rawgit.com/MariaAdrover/lunar-landing-javascript/v0.7mini/instrucciones.html';} document.getElementById('siAB').onclick=function(){location.href='https://rawgit.com/MariaAdrover/lunar-landing-javascript/v0.7mini/about.html';} document.getElementById('noINS').onclick=function(){document.getElementById('adINSTRUCCIONES').style.display='none';advert=false;if(menu==false&&juegoEmpezado&&aterrizado==false){reanudarJuego();} if(menu==false&&contadorOn){contador=setInterval(cuentaAtras,1000);}} document.getElementById('noAB').onclick=function(){document.getElementById('adABOUT').style.display='none';advert=false;if(menu==false&&juegoEmpezado&&aterrizado==false){reanudarJuego();} if(menu==false&&contadorOn){contador=setInterval(cuentaAtras,1000);}} document.getElementsByClassName('reiniciar')[0].onclick=function(){if(advert==false){location.href='https://rawgit.com/MariaAdrover/lunar-landing-javascript/v0.7mini/index.html';}} document.getElementsByClassName('reiniciar')[1].onclick=function(){if(advert==false){location.href='https://rawgit.com/MariaAdrover/lunar-landing-javascript/v0.7mini/index.html';}} document.getElementsByClassName('reiniciar')[2].onclick=function(){if(advert==false){location.href='https://rawgit.com/MariaAdrover/lunar-landing-javascript/v0.7mini/index.html';}} document.getElementById('power').onclick=function(){if(advert==false){botonPower();}} document.onkeydown=function(e){if(e.keyCode==32){if(advert==false){teclaEspacioPulsada();}}} document.onkeyup=function(){motorOff();} document.getElementById("musicOn").addEventListener("click",function(){if(musicOn){if(screen.width>770){if(aterrizado==false){audioElement.pause();musicOn=false;}else{audioElement.pause();musicOn=false;}}else{audioElement.pause();musicOn=false;} document.getElementById('musicOn').style.display='none';document.getElementById('musicOff').style.display='block';}});document.getElementById("musicOff").addEventListener("click",function(){if(musicOn==false){document.getElementById('musicOn').style.display='block';document.getElementById('musicOff').style.display='none';if(screen.width>770){if(aterrizado==false){audioElement.play();musicOn=true;}else{audioElement.play();musicOn=true;}}else{audioElement.play();musicOn=true;}}});document.getElementById('facil').onclick=function(){if(advert==false){nivelFacil();}} document.getElementById('dificil').onclick=function(){if(advert==false){nivelDificil();}}} function nivelFacil(){document.getElementById('dificultad').style.display='none';nContador=2;contadorOn=true;document.getElementById('contador3').style.display='block';document.getElementById('velocidad').innerHTML=v.toFixed(1);contador=setInterval(cuentaAtras,1000);} function nivelDificil(){audioElement.setAttribute('src','sound/Fast Ace.wav');if(musicOn==false){audioElement.pause();} document.getElementById('dificultad').style.display='none';v=15;document.getElementById('velocidad').innerHTML=v.toFixed(1);dt=(dt*2);c=50;combustible.style.width="50%";nContador=2;contadorOn=true;document.getElementById('contador3').style.display='block';contador=setInterval(cuentaAtras,1000);} function cuentaAtras(){if(nContador>0){document.getElementById('contador3').innerHTML=nContador;}else{clearInterval(contador);document.getElementById('contador3').style.display='none';contadorOn=false;juegoEmpezado=true;start();} nContador--;} function botonPower(){if(juegoEmpezado==true&&pause==false&&aterrizado==false&&sinCombustible==false){if(a==g){motorOn();}else{motorOff();}}} function pausarJuego(){stop();pause=true;clearInterval(timer);} function reanudarJuego(){pause=false;timer=setInterval(function(){moverNave();},dt*1000);} function teclaEspacioPulsada(){if(juegoEmpezado==true&&pause==false&&aterrizado==false&&sinCombustible==false){motorOn();}} function cambiarNave(){if(nave<2){nave++;}else{nave=1;} if(motorON){if(nave==1){document.getElementById('n').src='img/coheteFuego.png';}else{document.getElementById('n').src='img/cohete2Fuego.png';}}else{if(nave==1){document.getElementById('n').src='img/cohete.png';}else{document.getElementById('n').src='img/cohete2.png';}}} function start(){timer=setInterval(function(){moverNave();},dt*1000);} function stop(){clearInterval(timer);if(aterrizado){velocidad.innerHTML=0;altura.innerHTML=0;}} function moverNave(){v+=a*dt;y+=v*dt;if(v<0){velocidad.innerHTML=(-v).toFixed(1);}else{velocidad.innerHTML=v.toFixed(1);} altura.innerHTML=(70-y).toFixed(1);if(y<=0){document.getElementById("nave").style.top="0%";v=-v;}else if(y<70&&y>=0){document.getElementById("nave").style.top=y+"%";}else{aterrizado=true;clearInterval(timerFuel);if(nave==1){document.getElementById("n").src="img/cohete.png"}else{document.getElementById("n").src="img/cohete2.png"} document.getElementById('power').src='img/powerOFF.png' stop();finalJuego();}} function motorOn(){document.getElementById('power').src='img/powerON.png' if(aterrizado==false&&c>0){a=-g;motorON=true;if(nave==1){document.getElementById("n").src="img/coheteFuego.png"}else{document.getElementById("n").src="img/cohete2Fuego.png"}}else{motorOff();} if(aterrizado==false&&timerFuel==null) timerFuel=setInterval(function(){actualizarFuel();},10);} function motorOff(){a=g;clearInterval(timerFuel);timerFuel=null;motorON=false;if(aterrizado==false){if(nave==1){document.getElementById("n").src="img/cohete.png"}else{document.getElementById("n").src="img/cohete2.png"}} document.getElementById('power').src='img/powerOFF.png'} function actualizarFuel(){if(c<0){sinCombustible=true;motorOff();} if(pause==false){c-=0.1;combustible.style.width=c+"%";}} function finalJuego(){if(v>3){if(screen.width>770){audioElement.setAttribute('src','sound/fail.wav');if(musicOn==false){audioElement.pause();}} document.getElementById('final2').style.display='block';document.getElementsByClassName('velFinal')[1].innerHTML=v.toFixed(1);if(nave==1){document.getElementById("n").src="img/astronauta3.png";}else{document.getElementById("n").src="img/astronauta2.png";}}else{if(screen.width>770){audioElement.setAttribute('src','sound/success.wav');if(musicOn==false){audioElement.pause();}} document.getElementById('final1').style.display='block';document.getElementsByClassName('velFinal')[0].innerHTML=v.toFixed(1);document.getElementById('n').src='img/astronauta.png';}}